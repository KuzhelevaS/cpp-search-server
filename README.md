# Поисковый сервер
Поисковый сервер позволяет добавлять документы и удалять дубликаты. Задает стоп-слова и выполняет как однопоточные, так и многопоточные запросы. Позволяет задавать параметры поиска и разделяет результат на страницы.

### В проекте используются
![C++17](https://img.shields.io/badge/C++17-1F2023?style=flat-square)
![STL](https://img.shields.io/badge/STL-1F2023?style=flat-square)
![Многопоточность](https://img.shields.io/badge/%D0%9C%D0%BD%D0%BE%D0%B3%D0%BE%D0%BF%D0%BE%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C-1F2023?style=flat-square)
![Unit-тесты](https://img.shields.io/badge/Unit--%D1%82%D0%B5%D1%81%D1%82%D1%8B-1F2023?style=flat-square)
![Макросы](https://img.shields.io/badge/%D0%9C%D0%B0%D0%BA%D1%80%D0%BE%D1%81%D1%8B-1F2023?style=flat-square)

## Рекомендации по запуску и использованию
Примеры использования показаны в файле main.cpp, а в конце файла приведен ожидаемый вывод.

Ниже рассмотрен основной функционал:

* [SearchServer](#searchserver)
* [RemoveDuplicates](#removeduplicates)
* [Paginator](#paginator)
* [ConcurrentMap](#concurrentmap)
* [LogDuration](#logduration)

### SearchServer
`#include "search_server.h"`

Ядро поисковой системы. Хранит добавленные документы и обеспечивает поиск по ним.

* `SearchServer` - несколько видов конструкторов. Позволяют создать сервер без стоп-слов или передать список стоп-слов в виде строки или контейнера.
* `AddDocument` - добавляет документ. 
* `FindTopDocuments` - возвращает документы, лучше всего соответствующие запросу. Ограничивает количество возвращаемых документов значением параметра `MAX_RESULT_DOCUMENT_COUNT`. *Имеет многопоточную версию.*
* `MatchDocument` - возвращает статус документа и слова из переданного запроса, содержащиеся в документе с заданным ID. *Имеет многопоточную версию.*
* `GetDocumentCount` - возвращает общее количество документов на сервере.
* `begin` и `end` - итераторы, предоставляющие доступ к перебору документов.
* `GetWordFrequencies` - возвращает все слова и их частоту в документе с заданным ID
* `RemoveDocument` - удаляет документ.

### RemoveDuplicates
`#include "remove_duplicates.h"`

Функция принимает ссылку на поисковую систему и осуществляет поиск и удаление дубликатов документов.

### Paginator
`#include "paginator.h"`

Принимает начальный и конечный итераторы списка документов, и разбивает его на страницы заданного размера.

* `Paginate` - добавленная для удобства обертка, принимающая вместо итераторов контейнер.
* `begin` и `end` - операторы произвольного доступа, позволяющие перемещаться между страницами поисковой выдачи.
* `size` - возвращает общее количество страниц.

### ConcurrentMap
`#include "concurrent_map.h"`

Словарь, поддежривающий многопоточность. Реализуется засчет разделения словаря на группы, каждая из которых имеет свой мьютекс.
* `ConcurrentMap` - конструктор, принимает количество групп, среди которых будут распределяться добавляемые элементы.
* И`operator[]` - перегруженный оператор доступа, возвращающий специальный объект `Access`, который обеспечивает безопасный многопоточный доступ. Действует как аналогичный оператор обычного словаря:
  + если элемент с таким ключом не найден, создает элемент.
  + если элемент найден, предоставляет к нему доступ.
* `BuildOrdinaryMap()` - объединяет все группы в обычный словарь `std::map` и возвращает его.
* `Erase` - удаляет объект.

### LogDuration
`#include "log_duration.h"`

Фиксирует время в миллисекундах от места вызова и до автоматического вызова деструктора при выходе из области видимости. 

Работает на основе макросов, следует идиоме RAII.
